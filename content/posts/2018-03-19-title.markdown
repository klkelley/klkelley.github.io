---
layout: post
comments: true
title: What's HTTP?
date: 2018-03-19 11:54:00
---


### What is HTTP? 
<br>

HTTP stands for Hypertext Transfer Protocol. It's the network protocol used to
deliver virtually all files and other data (referred to as resources) on the 
World Wide Web. This includes HTML files, images, query results, etc. 

HTTP functions as a request-response protocol in the client-server computing model 
which I lightly touched on in a prior [post](https://www.karakelley.me/2018/03/07/sockets.html). 

A browser is an HTTP client because it sends request to an HTTP server which then 
sends responses back to the client (the browser). The default port for HTTP servers
to listen on is port 80 but they can use any port. For instance, my server currently listens on port 8080 which means the port has to be specified in the URL. 

HTTP is also a stateless protocol which means the current request doesn't have any 
knowledge of previous requests. It can, however, be become stateful with the use of cookies. 


I mentioned resources earlier; HTTP is used to transmit resources, not just files. 
HTTP resources are identified and located on the network by Uniform Resources Locations (URLs), using the Uniform Resource Identifiers (URIs) schemes, http and https. A URL has the following syntax:
`protocol://hostname:port/path-and-filename`

Let's break down the URL into it's 4 different parts:
1. Protocol - the application-level protocol used by the client and server (HTTP, FTP (File Transfer Protocol), telnet, etc). 
2. Hostname -> The DNS domain name (ex. www.example.com) or IP address (192.128.4.3) of the server
3. Port - The TCP port number that the server is listening on for incoming requests. If the server is listening on port 80 you do not need to specify. 
4. Path-and-filename - The name and location of the requested resource, under the server document base directory. 

A concrete example would look like this: `http://karakelley.rocks:8080/index.html`. The protocol is HTTP. The hostname is `www.karakelley.rocks`. The port number is 8080. The path and file name for the resources to be located is `index.html`. 

So, whenever you type a URL in a browser, the browser translates the URL into a request message according to the specified protocol. It then sends the request 
message to the server. For example typing in `http://karakelley.rocks:8080/` 
resulting in the following request message (we'll talk more about the anatomy of a request below):



```
GET / HTTP/1.1
Host: karakelley.rocks:8080
Connection: keep-alive
Cache-Control: max-age=0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate
Accept-Language: en-US,en;q=0.9

```



When the request reaches the server, the server can take either one of these actions: 
1. The server interprets the request, maps the request into a file under the server's document directory and returns the file requested to the client. 
2. The server interprets the request, maps the request into a program, executes the program and returns the output of the program to the client. 
3. The request cannot be satisfied and the server returns an error message. 


Let's revisit that example request above and talk about the anatomy of HTTP transactions. 

#### HTTP request messages
<br>

A HTTP request message consists of a message header which contains the request line and request headers, a blank line, and a request message body (optional).

![http-request](https://www.ntu.edu.sg/home/ehchua/programming/webprogramming/images/HTTP_RequestMessage.png)

A **request line** as three parts separated by spaces: 
`GET / HTTP/1.1`

1. A method name (i.e. `GET`)
2. The local path of the requested resource (i.e. `/`)
3. The version of HTTP being used 


**Request headers** are in the form of `key-value` pairs. For example in our example above `Host: karakelley.rocks:8080` is just one of the request headers within that request message. 

The following also shows a sample HTTP request that breaks it down by each section.

![http-request2](https://www.ntu.edu.sg/home/ehchua/programming/webprogramming/images/HTTP_RequestMessageExample.png)

#### HTTP response messages
<br>

The first line of a response message is the **status line** followed by optional response headers. The **status line** consists of the following syntax `HTTP-version status-code reason-phrase`

1. HTTP-version - The HTTP version used in the session (either HTTP/1.1 or HTTP/1.0).
2. status-code - A 3 digit number generated by the server that reflects the outcome of the request. 
3. Reason-phrase - A short explanation to the status code.

_Note: I won't go into what each status code represents. There are some fun resources out there to learn HTTP status codes. I recommend a quick Google search of HTTP cats or HTTP rappers. You're Welcome!_ 

Example status lines: 


```
HTTP/1.1 200 OK
HTTP/1.1 404 Not Found
```

Response Headers are also in the form of `key-value` pairs in the same fashion as request headers. Response headers server the purpose to give the client information about the data being sent back. 

Here is an example of a sample response message with response headers:

![response-msg](https://www.ntu.edu.sg/home/ehchua/programming/webprogramming/images/HTTP_ResponseMessageExample.png)


An HTTP message may have a body of data send after the header lines. In a response, this is where the requested resource is returned to the client (an HTML document for example). If an HTTP response message includes a body it has to include the response headers of `Content-Type` and `Content-Length` which
gives the client pertinent information about the data being sent back. 

#### HTTP Request Methods 
<br>

* **GET** - A client uses the GET to request a resource from the server (most common HTTP request method).
* **HEAD** - Just like a GET request except that is asks the server to respond the response headers only and not the actual resource (i.e. no body). This is used to check the characteristics of a resources without actually downloading it. _note: the response to a HEAD request must never contain a body just the status line and headers._
* **POST** - This request is used to send data to the server to be processed in some way. 
* **PUT** - Ask the server to store the data.
* **DELETE** - Ask the server to delete the data.
* **OPTIONS** - Ask the server to return the list of request methods it supports.
* **TRACE** - Ask the server to return a diagnostic trace of the actions it takes.


#### HTTP Request Headers
<br>

Here are some of the commonly used request headers. The HTTP spec goes into significantly more detail on each one and lists many more headers. This just serves to give an overview. HTTP request headers give the server information about what type of data is appropriate to send back. 

* **Host: domain-name** - Multiple DNS names (i.e. karakelley.rocks) can reside on the same physical server, with their own document root directories. The `Host` header is mandatory in HTTP/1.1. 
* **Accept: mime-type-1, mime-type-2, etc** - The client can use the Accept header to tell the server the MIME types it can handle and it prefers. For example, if the server has multiple versions of the resource requested (ex. a document in a txt format and PDF), it can check this header to decide which version to return. This process is called content-type negotiation. 
* **Accept-Language: language-1, language-2, etc** - The client can use this header to tell the server which language it can handle and it prefers. If the server has multiple versions of the requested resource, it can check this headers to determine which version to return. This is called language negotiation. 
* **Accept-Charset: charset-1, charset-2, etc** - The process is similar to `accept-language` and `accept` and is called character set negotiation.
* **Connection: Close, Keep-Alive** - The client can use this header to tell that server whether to close the connection after the request or the keep the connection open for another request. HTTP/1.1 uses keep-alive by default whereas HTTP/1.0 uses close by default. 
* **User-Agent: browser type** - Identify the type of browser used to make this request. The server can use this information to return a different document depending on the type of browser.
* **Content-Length: number of bytes** - Used by POST request to inform the server the length of the body (This is also a response header to inform the client the number of bytes of the body being returned).
* **If-Modified-Since: date** - Tells the server to send the page only if it has been modified since after the specified date. Clients aren't required to use this header but HTTP/1.1 servers are required to honor requests that do use them. This is used for conditional GET requests. 


There are some other (important) concepts that I haven't touched on like cookies and Cross-Origin Resource Sharing which will be coming in a later blog post as I approach them in my HTTP Server project. 