<!doctype html><html><head><title>Java Virtual Machine (JVM)</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/assets/css/bootstrap.min.css><link rel=stylesheet href=/assets/css/layouts/main.css><link rel=stylesheet href=/assets/css/style.css><link rel=stylesheet href=/assets/css/navigators/navbar.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/assets/images/favicon.png><link rel=stylesheet href=/assets/css/style.css><meta name=description content="Getting to know the Java Virtual Machine and what it means to &#34;run on the JVM&#34;"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/assets/css/layouts/single.css><link rel=stylesheet href=/assets/css/navigators/sidebar.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/assets/images/main-logo.png>Kara Kelley (they/them)</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/assets/images/main-logo.png class=d-none id=main-logo>
<img src=/assets/images/inverted-logo.png class=d-none id=inverted-logo></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><input type=text placeholder=Search data-search id=search-box><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/fp-oop/>FP & OOP</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/assets/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/kara.jpg><h5 class=author-name>Kara Kelley</h5><p>February 14, 2018</p></div><div class=title><h1>Java Virtual Machine (JVM)</h1></div><div class=post-content id=post-content><p>As I began a new project using Clojure last week I found out that Clojure &ldquo;runs on the JVM&rdquo;. There are other languages
that also run on the JVM including: Scala, Groovy, and Kotlin. So let&rsquo;s talk about what that JVM actually is and how
other lanauges can run on it.</p><p>At the heart of a computer is the CPU and it&rsquo;s job is to execute operations. The CPU&rsquo;s architecture
determines what operations are available as part of the architecture&rsquo;s <em>instruction set</em>.</p><p>Languages like C are compiled into <em>instructions</em> that a CPU will understand. Broadly, the process is as follows:</p><ol><li>The compiler reads the source code (the code you wrote in your editor)</li><li>The compiler outputs corresponding object files</li><li>The linker <em>links</em> all the object files and produces an <code>.exe</code> file</li><li>The CPU executes the <code>.exe</code> file (the <em>instructions</em>)</li></ol><p>If you&rsquo;re a visual person, like myself, this displays the process as well.</p><p><img src=http://users.ecs.soton.ac.uk/dem/teaching/maths/proginc/chapter1/complink.jpg alt=c-compiling></p><p>In the end, you have to translate programs into instructions that the CPU can understand. It doesn&rsquo;t care what programming
language you used as long as it has instructions.</p><p>So, the JVM is similar to a computer in that is also needs to translate code into instructions, called Java Bytecode.
It&rsquo;s important to note that it&rsquo;s a <em>virtual</em> machine so this is accomplished through software vs. hardware.</p><p>The main function of the JVM is to load and execute your application. A running JVM executes Java bytecode by translating it on the fly into machine code (CPU instructions), which is called just-in-time compilation.</p><p>In order for programs to run on the JVM, it must be compiled into Java bytecode. When you compile programs, the bytecode is saved in a <code>.class</code> file. Then you package those files into Java archive files (JAR files). The JVM then executes the bytecode and sends machine instructions to the CPU. So similar to how the computer doesn&rsquo;t care how you generated machine instructions, the JVM doesn&rsquo;t care how you generated Java bytecode.</p><p><img src=http://net-informations.com/java/intro/img/java-virtual-machine.png alt=java-compiling></p><p>What&rsquo;s cool is if you take a look at the above diagram is that depending upon the machine on which the Java bytecode has to be executed, the JVM interprets the <code>.class</code> and generates different machine language, making it understandable to that operating system for execution. So, Java can run on any machine as long as the JVM is installed. This means Java programs are machine <strong>independent</strong>!</p><p>So when people say that Clojure (or Scala, Kotlin, etc) &ldquo;runs on the JVM&rdquo; or its a &ldquo;hosted language&rdquo; what that means is that Clojure programs gets compiled to Java bytecode and JVM processes execute them. I could have lead with that but I think having some context and an understanding of the JVM helps connect the dots easier.</p><p>This diagrams illustrates Clojure being compiled into Java bytcode for the JVM.</p><p><img src=http://blog.ndk.io/img/AOT_compilation.svg alt=clojure-compiling></p><p>So, we know that JAR files are essentially all of our <code>.class</code> files bundled together into one executable file. But, Clojure doesn&rsquo;t have classes so how are we able to run our Clojure apps bundled as JARs? You can actually make the Clojure compiler generate a class for a namespace by putting the <code>(:gen-class)</code> directive in the namespace declaration. Ironically, I actually came across this earlier today when I tried to run my JAR file and got an error. After a quick google search I fixed it but truly understanding why I needed to include that <code>(:gen-class)</code> directive makes all the difference. With that said, understanding how the JVM works has helped clarify my understanding of JAR files, too. It&rsquo;s a win win!</p></div><div class=btn-improve-page><a href=https://github.com/klkelley/klkelley.github.io/edit/master/content/posts/2018-02-14-jvm.markdown><i class="fas fa-code-branch"></i>
Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/2018-02-15-threads/ class="btn btn-outline-info"><span><i class="fas fa-chevron-circle-left"></i> Prev</span><br><span>Threading Macros</span></a></div><div class="col-md-6 next-article"><a href=/posts/2018-02-08-tdd-patterns/ class="btn btn-outline-info"><span>Next <i class="fas fa-chevron-circle-right"></i></span><br><span>Test-Driven Development Patterns</span></a></div></div><hr></div></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>kelley.15@gmail.com</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/assets/images/inverted-logo.png>
Toha</a></div><div class="col-md-4 text-center">Â© 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/assets/images/hugo-logo-wide.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/assets/js/jquery-3.4.1.min.js></script>
<script src=/assets/js/popper.min.js></script>
<script src=/assets/js/bootstrap.min.js></script>
<script src=/assets/js/navbar.js></script>
<script src=/assets/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/assets/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>