<!doctype html><html><head><title>Each, Map, & Select</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/assets/css/bootstrap.min.css><link rel=stylesheet href=/assets/css/layouts/main.css><link rel=stylesheet href=/assets/css/style.css><link rel=stylesheet href=/assets/css/navigators/navbar.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/assets/images/favicon.png><link rel=stylesheet href=/assets/css/style.css><meta name=description content="Working with common collection methods"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/assets/css/layouts/single.css><link rel=stylesheet href=/assets/css/navigators/sidebar.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/assets/images/main-logo.png>Kara Kelley (they/them)</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/assets/images/main-logo.png class=d-none id=main-logo>
<img src=/assets/images/inverted-logo.png class=d-none id=inverted-logo></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><input type=text placeholder=Search data-search id=search-box><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/fp-oop/>FP & OOP</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/assets/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/kara.jpg><h5 class=author-name>Kara Kelley</h5><p>April 3, 2017</p></div><div class=title><h1>Each, Map, & Select</h1></div><div class=post-content id=post-content><p>There are many ways to loop through an array or a hash. For instance, you can simply use a <code>do/while</code> loop along with a counter, a way to retrieve the current element, and a way to exit the loop.</p><p>Thankfully, Ruby provides us with some very helpful methods to accomplish such tasks based on what we want do to with our collection. The methods I am referring to are <code>each</code>, <code>select</code>, and <code>map</code>.</p><p><strong>Each</strong></p><p>First, let&rsquo;s talk about the <code>each</code> method. When called with a block, the each method iterates through each element of the collection. Once it is done iterating, the <code>each</code> method always returns the original collection.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>array <span style=color:#f92672>=</span> <span style=color:#f92672>[</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>array<span style=color:#f92672>.</span>each <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>number<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>  puts number
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5</span>
</span></span><span style=display:flex><span><span style=color:#75715e># =&gt; [1, 2, 3, 4, 5]</span>
</span></span></code></pre></div><p>As you can see in the example above, <code>each</code> takes each element in our array and assigns it to <code>number</code>. We then call <code>puts</code> on <code>number</code> which outputs it to the screen. Once it is done iterating, our original array is the return value of the block.</p><p>If you were asking yourself, &ldquo;But <code>puts</code> returns nil so why is the return value of the block the original collection?&rdquo; That is because whatever <code>each</code> is called on is the last expression in the method to be evaluated. Alternatively, if we used <code>each</code> inside a method and there was additional code following the block, the return value of that method would be different. To illustrate this, see the following example.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>some_method</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span><span style=color:#f92672>].</span>each <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>number<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>    puts number
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  puts <span style=color:#e6db74>&#34;hello world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>some_method
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3</span>
</span></span><span style=display:flex><span><span style=color:#75715e># hello world</span>
</span></span><span style=display:flex><span><span style=color:#75715e># =&gt; nil       </span>
</span></span></code></pre></div><p><strong>Select</strong></p><p>Now let&rsquo;s take a look at the <code>select</code> method. As the method name indicates, <code>select</code> performs selection.</p><p>Say you have an array and you want to return an array of all the elements that are less than 10. Reaching for the <code>select</code> method would be a good option. <code>select</code> returns a <strong>new</strong> collection based on the block&rsquo;s return value. If the return value evaluates to <code>true</code>, then that element is selected. The length of the new collection will be the length of the original collection or less.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>arr <span style=color:#f92672>=</span> <span style=color:#f92672>[</span><span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>45</span>, <span style=color:#ae81ff>31</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>0</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>arr<span style=color:#f92672>.</span>select <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>number<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>  number <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># =&gt; [2, 9, 6, 0]</span>
</span></span></code></pre></div><p>When using <code>select</code> it is imperative to pay attention to the block&rsquo;s return value. Say we used the same example as above but decided to call <code>puts</code> within the block.</p><p>It should be noted, if <code>select</code> is called on an array, it returns a new array. When called on a hash, it returns a new hash.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>arr <span style=color:#f92672>=</span> <span style=color:#f92672>[</span><span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>45</span>, <span style=color:#ae81ff>31</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>0</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>arr<span style=color:#f92672>.</span>select <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>number<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>  puts number <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># =&gt; []</span>
</span></span></code></pre></div><p>The last line to be evaluated in the block was <code>puts number &lt; 10</code> and since <code>puts</code> returns <code>nil</code>, no elemets were selected. <code>select</code> only selects items when the return value is <code>true</code>.</p><p><strong>Map</strong></p><p>Lastly, we will discuss using <code>map</code>. In contrast to <code>select</code>, map performs transformation instead of selection. Transformation refers to manipulating <em>every</em> element in the collection. <code>map</code> returns a new collection based on the block&rsquo;s return value. Each element is transformed based on the return value. In short, <code>map</code> returns a new collection of transformed elements.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>  <span style=color:#f92672>[</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span><span style=color:#f92672>].</span>map <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>number<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>    number <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># =&gt; [2, 3, 4]</span>
</span></span></code></pre></div><p>So as you can see <code>map</code> is a good choice when we want to transform each element in the collection in some way. What if we called <code>map</code> on a collection where we wanted to find only the odd numbers?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#f92672>[</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span><span style=color:#f92672>].</span>map <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>number<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>  number<span style=color:#f92672>.</span>odd?
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#=&gt; [true, false, true]</span>
</span></span></code></pre></div><p>In the example above we got a return value of an array of booleans. This is because <code>map</code> <em>always</em> performs transformation based on the return value of the block. In the above example, the return value of the block is a boolean thus an array of booleans was returned (For the above example, <code>select</code> would have been a better option).</p><p><strong>Enumerable Module</strong></p><p>One last thing I want to touch on before wrapping up is: Why can we call the methods <code>select</code> and <code>map</code> on arrays and hashes? Because both arrays and hashes have an <code>each</code> method in their Class. <code>select</code> and <code>map</code> are actually methods in the <code>Enumerable</code> module. The <code>Enumerable</code> module states that as long as the Class has an <code>each</code> method, it has access to the entire <code>Enumerable</code> module and its methods.</p><p>What does <code>each</code> have to do with any of this? Well, the <code>Enumerable</code> module relies on the <code>each</code> method&rsquo;s ability to communicate how to iterate through the collections. As long as the <code>Enumerable</code> module knows how to iterate through the collection, it can access all <code>Enumerable</code> methods.</p></div><div class=btn-improve-page><a href=https://github.com/klkelley/klkelley.github.io/edit/master/content/posts/2017-04-03-title.markdown><i class="fas fa-code-branch"></i>
Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/2017-04-06-title/ class="btn btn-outline-info"><span><i class="fas fa-chevron-circle-left"></i> Prev</span><br><span>Puts vs. Return</span></a></div><div class="col-md-6 next-article"><a href=/posts/2017-03-20-title/ class="btn btn-outline-info"><span>Next <i class="fas fa-chevron-circle-right"></i></span><br><span>Local Variable Scope</span></a></div></div><hr></div></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>kelley.15@gmail.com</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/assets/images/inverted-logo.png>
Toha</a></div><div class="col-md-4 text-center">© 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/assets/images/hugo-logo-wide.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/assets/js/jquery-3.4.1.min.js></script>
<script src=/assets/js/popper.min.js></script>
<script src=/assets/js/bootstrap.min.js></script>
<script src=/assets/js/navbar.js></script>
<script src=/assets/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/assets/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>